'use strict';

var express = require('express');
var path = require('path');
var bodyParser = require('body-parser');
var mongoose = require('mongoose');
var handlers = require('./handlers.js');
var session = require('express-session');
mongoose.Promise = require('bluebird');

mongoose.connect('mongodb://localhost/notelist');

var app = express();

app.use(session({ secret: 'secret', username: null, password: null, resave: true, saveUninitialized: true }));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));

app.use('/', express.static(path.join(__dirname, '../client')));
app.use('/lib', express.static(path.join(__dirname, '../../node_modules')));
app.use('/login', express.static(path.join(__dirname, '../client/pages/login.html')));
app.use('/signup', express.static(path.join(__dirname, '../client/pages/signup.html')));

app.get('/logout', handlers.logout);
app.post('/login', handlers.login);
app.post('/movies/search', handlers.addMovie);

app.listen(8000);
console.log('Listening on 127.0.0.1:8000');

module.exports = app;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2ZXIvc2VydmVyLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicGF0aCIsImJvZHlQYXJzZXIiLCJtb25nb29zZSIsImhhbmRsZXJzIiwic2Vzc2lvbiIsIlByb21pc2UiLCJjb25uZWN0IiwiYXBwIiwidXNlIiwic2VjcmV0IiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJnZXQiLCJsb2dvdXQiLCJwb3N0IiwibG9naW4iLCJhZGRNb3ZpZSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLFVBQVVDLFFBQVEsU0FBUixDQUFkO0FBQ0EsSUFBSUMsT0FBT0QsUUFBUSxNQUFSLENBQVg7QUFDQSxJQUFJRSxhQUFhRixRQUFRLGFBQVIsQ0FBakI7QUFDQSxJQUFJRyxXQUFXSCxRQUFRLFVBQVIsQ0FBZjtBQUNBLElBQUlJLFdBQVdKLFFBQVEsZUFBUixDQUFmO0FBQ0EsSUFBSUssVUFBVUwsUUFBUSxpQkFBUixDQUFkO0FBQ0FHLFNBQVNHLE9BQVQsR0FBbUJOLFFBQVEsVUFBUixDQUFuQjs7QUFFQUcsU0FBU0ksT0FBVCxDQUFpQiw4QkFBakI7O0FBRUEsSUFBSUMsTUFBTVQsU0FBVjs7QUFFQVMsSUFBSUMsR0FBSixDQUFRSixRQUFRLEVBQUNLLFFBQVEsUUFBVCxFQUFtQkMsVUFBVSxJQUE3QixFQUFtQ0MsVUFBVSxJQUE3QyxFQUFtREMsUUFBUSxJQUEzRCxFQUFpRUMsbUJBQW1CLElBQXBGLEVBQVIsQ0FBUjtBQUNBTixJQUFJQyxHQUFKLENBQVFQLFdBQVdhLElBQVgsRUFBUjtBQUNBUCxJQUFJQyxHQUFKLENBQVFQLFdBQVdjLFVBQVgsQ0FBc0IsRUFBQ0MsVUFBVSxJQUFYLEVBQXRCLENBQVI7O0FBRUFULElBQUlDLEdBQUosQ0FBUSxHQUFSLEVBQWFWLFFBQVFtQixNQUFSLENBQWVqQixLQUFLa0IsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFdBQXJCLENBQWYsQ0FBYjtBQUNBWixJQUFJQyxHQUFKLENBQVEsTUFBUixFQUFnQlYsUUFBUW1CLE1BQVIsQ0FBZWpCLEtBQUtrQixJQUFMLENBQVVDLFNBQVYsRUFBcUIsb0JBQXJCLENBQWYsQ0FBaEI7QUFDQVosSUFBSUMsR0FBSixDQUFRLFFBQVIsRUFBa0JWLFFBQVFtQixNQUFSLENBQWVqQixLQUFLa0IsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLDRCQUFyQixDQUFmLENBQWxCO0FBQ0FaLElBQUlDLEdBQUosQ0FBUSxTQUFSLEVBQW1CVixRQUFRbUIsTUFBUixDQUFlakIsS0FBS2tCLElBQUwsQ0FBVUMsU0FBVixFQUFxQiw2QkFBckIsQ0FBZixDQUFuQjs7QUFFQVosSUFBSWEsR0FBSixDQUFRLFNBQVIsRUFBbUJqQixTQUFTa0IsTUFBNUI7QUFDQWQsSUFBSWUsSUFBSixDQUFTLFFBQVQsRUFBbUJuQixTQUFTb0IsS0FBNUI7QUFDQWhCLElBQUllLElBQUosQ0FBUyxnQkFBVCxFQUEyQm5CLFNBQVNxQixRQUFwQzs7QUFFQWpCLElBQUlrQixNQUFKLENBQVcsSUFBWDtBQUNBQyxRQUFRQyxHQUFSLENBQVksNkJBQVo7O0FBRUFDLE9BQU9DLE9BQVAsR0FBaUJ0QixHQUFqQiIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xudmFyIGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xudmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbnZhciBoYW5kbGVycyA9IHJlcXVpcmUoJy4vaGFuZGxlcnMuanMnKTtcbnZhciBzZXNzaW9uID0gcmVxdWlyZSgnZXhwcmVzcy1zZXNzaW9uJyk7XG5tb25nb29zZS5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcblxubW9uZ29vc2UuY29ubmVjdCgnbW9uZ29kYjovL2xvY2FsaG9zdC9ub3RlbGlzdCcpO1xuXG52YXIgYXBwID0gZXhwcmVzcygpO1xuXG5hcHAudXNlKHNlc3Npb24oe3NlY3JldDogJ3NlY3JldCcsIHVzZXJuYW1lOiBudWxsLCBwYXNzd29yZDogbnVsbCwgcmVzYXZlOiB0cnVlLCBzYXZlVW5pbml0aWFsaXplZDogdHJ1ZX0pKVxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7ZXh0ZW5kZWQ6IHRydWV9KSk7XG5cbmFwcC51c2UoJy8nLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vY2xpZW50JykpKTtcbmFwcC51c2UoJy9saWInLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vLi4vbm9kZV9tb2R1bGVzJykpKTtcbmFwcC51c2UoJy9sb2dpbicsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9jbGllbnQvcGFnZXMvbG9naW4uaHRtbCcpKSlcbmFwcC51c2UoJy9zaWdudXAnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vY2xpZW50L3BhZ2VzL3NpZ251cC5odG1sJykpKVxuXG5hcHAuZ2V0KCcvbG9nb3V0JywgaGFuZGxlcnMubG9nb3V0KTtcbmFwcC5wb3N0KCcvbG9naW4nLCBoYW5kbGVycy5sb2dpbik7XG5hcHAucG9zdCgnL21vdmllcy9zZWFyY2gnLCBoYW5kbGVycy5hZGRNb3ZpZSk7XG5cbmFwcC5saXN0ZW4oODAwMCk7XG5jb25zb2xlLmxvZygnTGlzdGVuaW5nIG9uIDEyNy4wLjAuMTo4MDAwJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXBwOyJdfQ==