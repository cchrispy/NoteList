'use strict';

var express = require('express');
var path = require('path');
var bodyParser = require('body-parser');
var mongoose = require('mongoose');
var handlers = require('./handlers.js');
var session = require('express-session');
mongoose.Promise = require('bluebird');

mongoose.connect('mongodb://localhost/notelist');

var app = express();

app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));

app.use('/', express.static(path.join(__dirname, '../client')));
app.use('/lib', express.static(path.join(__dirname, '../../node_modules')));
app.use('/login', express.static(path.join(__dirname, '../client/pages/login.html')));

app.post('/login', handlers.login);
app.post('/movies/search', handlers.addMovie);

app.listen(8000);
console.log('Listening on 127.0.0.1:8000');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2ZXIvc2VydmVyLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicGF0aCIsImJvZHlQYXJzZXIiLCJtb25nb29zZSIsImhhbmRsZXJzIiwic2Vzc2lvbiIsIlByb21pc2UiLCJjb25uZWN0IiwiYXBwIiwidXNlIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImpvaW4iLCJfX2Rpcm5hbWUiLCJwb3N0IiwibG9naW4iLCJhZGRNb3ZpZSIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsVUFBVUMsUUFBUSxTQUFSLENBQWQ7QUFDQSxJQUFJQyxPQUFPRCxRQUFRLE1BQVIsQ0FBWDtBQUNBLElBQUlFLGFBQWFGLFFBQVEsYUFBUixDQUFqQjtBQUNBLElBQUlHLFdBQVdILFFBQVEsVUFBUixDQUFmO0FBQ0EsSUFBSUksV0FBV0osUUFBUSxlQUFSLENBQWY7QUFDQSxJQUFJSyxVQUFVTCxRQUFRLGlCQUFSLENBQWQ7QUFDQUcsU0FBU0csT0FBVCxHQUFtQk4sUUFBUSxVQUFSLENBQW5COztBQUVBRyxTQUFTSSxPQUFULENBQWlCLDhCQUFqQjs7QUFFQSxJQUFJQyxNQUFNVCxTQUFWOztBQUVBUyxJQUFJQyxHQUFKLENBQVFQLFdBQVdRLElBQVgsRUFBUjtBQUNBRixJQUFJQyxHQUFKLENBQVFQLFdBQVdTLFVBQVgsQ0FBc0IsRUFBQ0MsVUFBVSxJQUFYLEVBQXRCLENBQVI7O0FBRUFKLElBQUlDLEdBQUosQ0FBUSxHQUFSLEVBQWFWLFFBQVFjLE1BQVIsQ0FBZVosS0FBS2EsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFdBQXJCLENBQWYsQ0FBYjtBQUNBUCxJQUFJQyxHQUFKLENBQVEsTUFBUixFQUFnQlYsUUFBUWMsTUFBUixDQUFlWixLQUFLYSxJQUFMLENBQVVDLFNBQVYsRUFBcUIsb0JBQXJCLENBQWYsQ0FBaEI7QUFDQVAsSUFBSUMsR0FBSixDQUFRLFFBQVIsRUFBa0JWLFFBQVFjLE1BQVIsQ0FBZVosS0FBS2EsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLDRCQUFyQixDQUFmLENBQWxCOztBQUVBUCxJQUFJUSxJQUFKLENBQVMsUUFBVCxFQUFtQlosU0FBU2EsS0FBNUI7QUFDQVQsSUFBSVEsSUFBSixDQUFTLGdCQUFULEVBQTJCWixTQUFTYyxRQUFwQzs7QUFFQVYsSUFBSVcsTUFBSixDQUFXLElBQVg7QUFDQUMsUUFBUUMsR0FBUixDQUFZLDZCQUFaIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XG52YXIgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xudmFyIGhhbmRsZXJzID0gcmVxdWlyZSgnLi9oYW5kbGVycy5qcycpO1xudmFyIHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcbm1vbmdvb3NlLlByb21pc2UgPSByZXF1aXJlKCdibHVlYmlyZCcpO1xuXG5tb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vbG9jYWxob3N0L25vdGVsaXN0Jyk7XG5cbnZhciBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoe2V4dGVuZGVkOiB0cnVlfSkpO1xuXG5hcHAudXNlKCcvJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL2NsaWVudCcpKSk7XG5hcHAudXNlKCcvbGliJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL25vZGVfbW9kdWxlcycpKSk7XG5hcHAudXNlKCcvbG9naW4nLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vY2xpZW50L3BhZ2VzL2xvZ2luLmh0bWwnKSkpXG5cbmFwcC5wb3N0KCcvbG9naW4nLCBoYW5kbGVycy5sb2dpbik7XG5hcHAucG9zdCgnL21vdmllcy9zZWFyY2gnLCBoYW5kbGVycy5hZGRNb3ZpZSk7XG5cbmFwcC5saXN0ZW4oODAwMCk7XG5jb25zb2xlLmxvZygnTGlzdGVuaW5nIG9uIDEyNy4wLjAuMTo4MDAwJyk7Il19